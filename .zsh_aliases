# SSHing into telephone servers # 
function tele() {
    ssh -p 22000 asterisk@$1.exotel.in $2
}

# credentials
alias creds="less ~/creds"

# ls with size as MB
alias lm="ls -l --block-size=M"

# get all todo comments in the dir
alias todo="/home/arjunmahishi/scripts/todo.py"

# general aliases
alias gri="grep -ri"
alias zrc="vim ~/.zshrc"
alias notes="vim ~/notes/$1"
alias d="cd ~/Documents/dev"

# docker aliases
alias dprune="docker container prune"

# Git aliases
alias gst="git status"
alias glg="git log"
alias gpm="git push origin master"
alias gac="git add -A && git commit $1"
alias grh="git reset HEAD~1"

function gdiff(){
    branch=`git branch | grep \* | cut -d ' ' -f2`
    git diff master..$branch --no-prefix -U999999 "$@"
}

# Exoaliases
alias e="cd /home/exotel/exotel_code"

# GO aliases
alias go-build-all="~/scripts/go-build-all.sh"

################### AWS ########################

alias aws-link-mum="rm -rf ~/.aws; ln -s ~/.aws_mum ~/.aws; cat ~/.aws/credentials_default > ~/.aws/credentials;"
alias aws-link-sg="rm -rf ~/.aws; ln -s ~/.aws_sg ~/.aws; cat ~/.aws/credentials_default > ~/.aws/credentials;"

export AWS_FUZZ_USER="unix-arjun"
export AWS_FUZZ_PRIVATE_IP='true' # Delete this one if you want to use public IP's

# aws sts token
function aws_sts_sg () {
    echo "Linking AWS SG credentials";
    aws-link-sg 
    echo "Generating STS Session Token";
    aws sts get-session-token --serial-number arn:aws:iam::350027074327:mfa/arjun --token-code "$1" --duration-seconds 129600  > /tmp/temp_token;
    cat /tmp/temp_token | sed "s/ //g;s/\"//g;s/\:/ =/g;s/,//g"|grep -vE "\{|\}"| (echo "[default]" && cat) > ~/.aws/credentials;
    sed -i "s/SecretAccessKey/aws_secret_access_key/g;s/AccessKeyId/aws_access_key_id/g;s/SessionToken/aws_session_token/g;/Expiration/d"  ~/.aws/credentials;
    echo "Generated new config file valid for 36 hours";
    cat ~/.aws/credentials
}

function aws_sts_mum () {
    echo "Linking AWS MUM credentials";
    aws-link-mum 
    echo "Generating STS Session Token";
    aws sts get-session-token --serial-number arn:aws:iam::350027074327:mfa/arjun --token-code "$1" --duration-seconds 129600  > /tmp/temp_token;
    cat /tmp/temp_token | sed "s/ //g;s/\"//g;s/\:/ =/g;s/,//g"|grep -vE "\{|\}"| (echo "[default]" && cat) > ~/.aws/credentials;
    sed -i "s/SecretAccessKey/aws_secret_access_key/g;s/AccessKeyId/aws_access_key_id/g;s/SessionToken/aws_session_token/g;/Expiration/d"  ~/.aws/credentials;
    echo "Generated new config file valid for 36 hours";
    cat ~/.aws/credentials
}

